<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Cat Clicker</title>
    <link rel="icon" type="image/svg+xml" href="/icons/favicon-cats.svg" />
    <link rel="apple-touch-icon" href="/icons/favicon-cats.svg" />
    <meta name="theme-color" content="#f0f0f0" />
    <meta name="description" content="Click a cat for the greater good" />
    
    <!-- Preconnect to external domains for better performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload critical fonts to prevent FOUC -->
    <link rel="preload" href="https://fonts.gstatic.com/s/materialsymbolsoutlined/v109/kJF1BvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oDMzByHX9rA6RzaxHMPdY43zj-jCxv3fzvRNU22ZXGJpEpjC_1v-p_4MrImHCIJIZrZXHMdY.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Optimized font loading with font-display: swap -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap">
    
    <link rel="stylesheet" href="./styles/cats.css">
    
    <!-- Analytics -->
    <script async src="/scripts/analytics.js"></script>

    <!-- Dev-only early error/logger hook (captures errors before module load) -->
    <script>
      (function () {
        try {
          if (window && window.__E2E__) return; // Disabled during E2E tests
          if (!/^(localhost|127\.0\.0\.1)/.test(location.hostname)) return;
          var send = function (level, message, data) {
            try {
              fetch('/__debug_log', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  timestamp: new Date().toISOString(),
                  level: level || 'info',
                  message: message || '',
                  data: data ? JSON.stringify(data) : undefined
                })
              });
            } catch (e) { /* noop */ }
          };
          window.addEventListener('error', function (e) {
            send('error', 'early window.onerror', {
              message: e.message,
              filename: e.filename,
              lineno: e.lineno,
              colno: e.colno,
              stack: (e.error && (e.error.stack || e.error.message)) || String(e.error)
            });
          }, true);
          window.addEventListener('unhandledrejection', function (e) {
            send('error', 'early unhandledrejection', {
              reason: (e.reason && (e.reason.stack || e.reason.message)) || String(e.reason)
            });
          });
          var original = { log: console.log, info: console.info, warn: console.warn, error: console.error, debug: console.debug };
          ['log','info','warn','error','debug'].forEach(function(k){
            console[k] = function(){
              try {
                var msg = Array.prototype.map.call(arguments, function(a){ return typeof a === 'string' ? a : ''; }).join(' ').trim();
                send(k, msg, Array.prototype.slice.call(arguments));
              } catch(_) {}
              return original[k].apply(console, arguments);
            };
          });
        } catch (_) { /* noop */ }
      })();
    </script>
</head>
<body>
    <div id="root"></div>
    <div id="heart-container"></div>
    <script type="module" src="./main.tsx"></script>
</body>
</html> 